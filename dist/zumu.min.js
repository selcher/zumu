/**
 * ZumuJS - 1.0.0
 * https://github.com/selcher/zumu
 *
 * Released under the MIT License
 * http://opensource.org/licenses/MIT
 */
var Zumu=function(t){"use strict";function e(){var t=null;return this instanceof e?(this.container=n.createElement("div"),this.contentContainer=null,this.x=0,this.y=0,this.z=-100,this.zoomIncrement=100,this.moveIncrement=10,t=this):t=new e,t}var n=t,i=function(t){void 0!==console&&console.log&&console.log(t)};return e.prototype.init=function(t){if(this.contentContainer)i("ZumuJS: HTML Element already initialized.");else if(t){this.contentContainer=t;var e=this.initContainer(this.container,t);this.addZoomButtons(e),this.addKeyListeners(e)}else i("ZumuJS: Initialization failed. No HTML Element passed.")},e.prototype.initContainer=function(t,e){e.parentElement.insertBefore(t,e.nextSibling),t.appendChild(e);var n=e.getBoundingClientRect();return t.className="zumu-container",t.style.cssText+=[this.buildPerspectiveStyle("800px"),this.buildSizeStyle(n.width,n.height)].join(""),t.setAttribute("tabindex",0),this.setElementPosition(this.x,this.y,this.z),t},e.prototype.setElementStyle=function(t){this.contentContainer.style.cssText+=t},e.prototype.setElementPosition=function(t,e,n){var i=this.buildTranslateStyle(t,e,n),o=this.buildTransformStyle(i);this.setElementStyle(o)},e.prototype.createButton=function(t){var e=n.createElement("div");return t&&(e.style.cssText+=t.style),e},e.prototype.addZoomButtons=function(t){var e=this,n=this.createButton({style:this.buildPositionStyle("absolute",{top:10,left:10})}),i=this.createButton({style:this.buildPositionStyle("absolute",{top:10,left:35})}),o=this.createButton({style:this.buildPositionStyle("absolute",{top:10,left:60})});t.appendChild(n),t.appendChild(i),t.appendChild(o),n.className="zumu-button",n.innerHTML="+",i.className="zumu-button",i.innerHTML="-",o.className="zumu-button",o.innerHTML="*",n.addEventListener("click",function(){e.zoom(e.zoomIncrement)}),i.addEventListener("click",function(){e.zoom(-e.zoomIncrement)}),o.addEventListener("click",function(){e.resetZoom()})},e.prototype.zoom=function(t){this.z+t<=-100&&(this.z+=t,this.setElementPosition(this.x,this.y,this.z))},e.prototype.resetZoom=function(){this.resetPosition(),this.setElementPosition(this.x,this.y,this.z)},e.prototype.resetPosition=function(){this.x=0,this.y=0,this.z=-100},e.prototype.addKeyListeners=function(t){var e=this;document.addEventListener("keydown",function(e){return n.activeElement===t?(e.preventDefault(),!1):!0}),t.addEventListener("keydown",function(t){var n=t.keyCode;return e.addZoomKeyListeners(n),e.addMoveKeyListeners(n),t.preventDefault(),!1})},e.prototype.addZoomKeyListeners=function(t){73===t&&this.zoom(this.zoomIncrement),79===t&&this.zoom(-this.zoomIncrement),82===t&&this.resetZoom()},e.prototype.addMoveKeyListeners=function(t){37===t&&this.moveX(-this.moveIncrement),39===t&&this.moveX(this.moveIncrement),38===t&&this.moveY(-this.moveIncrement),40===t&&this.moveY(this.moveIncrement)},e.prototype.moveX=function(t){this.x+=t,this.setElementPosition(this.x,this.y,this.z)},e.prototype.moveY=function(t){this.y+=t,this.setElementPosition(this.x,this.y,this.z)},e.prototype.buildPerspectiveStyle=function(t){return["perspective:"+t+";","-webkit-perspective:"+t+";","-moz-perspective:"+t+";","-o-perspective:"+t+";","perspective-origin:center;"].join("")},e.prototype.buildTranslateStyle=function(t,e,n){return"translate3d("+(t?t+"px":0)+","+(e?e+"px":0)+","+(n?n+"px":0)+");"},e.prototype.buildTransformStyle=function(t){return["transform:"+t,"-webkit-transform:"+t,"-moz-transform::"+t,"-o-transform::"+t].join("")},e.prototype.buildSizeStyle=function(t,e){return[void 0!==t?"width:"+t+"px;":"",void 0!==e?"height:"+e+"px;":""].join("")},e.prototype.buildPositionStyle=function(t,e){var n="";return"relative"===t?n="position:relative;":"absolute"===t&&(n=["position:absolute;",e&&e.top?"top:"+e.top+"px;":"",e&&e.right?"right:"+e.right+"px;":"",e&&e.left?"left:"+e.left+"px;":"",e&&e.bottom?"bottom:"+e.bottom+"px;":""].join("")),n},e.prototype.revert=function(){this.contentContainer?(this.resetPosition(),this.setElementStyle(this.buildTransformStyle("none;")),this.container.parentElement.insertBefore(this.contentContainer,this.container.nextSibling),this.container.remove?this.container.remove():this.container.parentElement.removeChild(this.container),this.resetContainers()):i("ZumuJS: Initialize before calling revert.")},e.prototype.resetContainers=function(){this.container=document.createElement("div"),this.contentContainer=null},e}(document);